$(function () {
  // Function to set the sidebar type based on window width
  var setsidebartype = function () {
    var width = window.innerWidth > 0 ? window.innerWidth : this.screen.width;
    if (width < 1199) {
      $("#main-wrapper").attr("data-sidebartype", "mini-sidebar");
      $("#main-wrapper").addClass("mini-sidebar");
    } else {
      $("#main-wrapper").attr("data-sidebartype", "full");
      $("#main-wrapper").removeClass("mini-sidebar");
    }
  };

  // Initialize sidebar type on window load and resize
  $(window).ready(setsidebartype);
  $(window).on("resize", setsidebartype);

  // Toggle the sidebar between mini and full
  $(".sidebartoggler").on("click", function () {
    $("#main-wrapper").toggleClass("mini-sidebar");
    $("#main-wrapper").toggleClass("show-sidebar");

    if ($("#main-wrapper").hasClass("mini-sidebar")) {
      $(".sidebartoggler").prop("checked", true);
      $("#main-wrapper").attr("data-sidebartype", "mini-sidebar");
    } else {
      $(".sidebartoggler").prop("checked", false);
      $("#main-wrapper").attr("data-sidebartype", "full");
    }
  });

  // Close the sidebar when clicking on any link within it
  $("#main-wrapper").on("click", ".sidebar-link", function () {
    if ($("#main-wrapper").hasClass("mini-sidebar")) {
      $("#main-wrapper").removeClass("show-sidebar");
    }
  });
});
